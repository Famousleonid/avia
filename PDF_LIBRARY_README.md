# –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ PDF –¥–ª—è Workorder

## –û–ø–∏—Å–∞–Ω–∏–µ

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ PDF –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–≥—Ä—É–∂–∞—Ç—å, –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å PDF —Ñ–∞–π–ª–∞–º–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ workorder. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Ä–∞–±–æ—Ç–∞ —Å –º–Ω–æ–≥–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã–º–∏ PDF —Ñ–∞–π–ª–∞–º–∏.

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### 1. –ó–∞–≥—Ä—É–∑–∫–∞ PDF —Ñ–∞–π–ª–æ–≤
- –ó–∞–≥—Ä—É–∑–∫–∞ –æ–¥–Ω–æ–≥–æ –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö PDF —Ñ–∞–π–ª–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞: 10MB
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤: `wo_{workorder_number}_{date}_{random}.pdf`

### 2. –ü—Ä–æ—Å–º–æ—Ç—Ä PDF
- –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä PDF –≤ –±—Ä–∞—É–∑–µ—Ä–µ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π PDF viewer)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–≥–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã—Ö PDF —Ñ–∞–π–ª–æ–≤
- –ü–æ–ª–Ω–æ—ç–∫—Ä–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º –ø—Ä–æ—Å–º–æ—Ç—Ä–∞

### 3. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–∞–º–∏
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö PDF –¥–ª—è workorder
- –ü—Ä–æ—Å–º–æ—Ç—Ä –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ñ–∞–π–ª–µ (—Ä–∞–∑–º–µ—Ä, –¥–∞—Ç–∞ –∑–∞–≥—Ä—É–∑–∫–∏)
- –°–∫–∞—á–∏–≤–∞–Ω–∏–µ PDF —Ñ–∞–π–ª–æ–≤
- –£–¥–∞–ª–µ–Ω–∏–µ PDF —Ñ–∞–π–ª–æ–≤

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ Workorder

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–ø–∏—Å–æ–∫ workorders (`/workorders`)
2. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É —Å –∏–∫–æ–Ω–∫–æ–π PDF (üìÑ) –≤ –∫–æ–ª–æ–Ω–∫–µ "PDF Library"
3. –í –æ—Ç–∫—Ä—ã–≤—à–µ–º—Å—è –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ:
   - –ó–∞–≥—Ä—É–∑–∏—Ç–µ PDF —Ñ–∞–π–ª—ã —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É –∑–∞–≥—Ä—É–∑–∫–∏
   - –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ PDF, –Ω–∞–∂–∞–≤ "View PDF"
   - –°–∫–∞—á–∏–≤–∞–π—Ç–µ —Ñ–∞–π–ª—ã, –Ω–∞–∂–∞–≤ "Download"
   - –£–¥–∞–ª—è–π—Ç–µ —Ñ–∞–π–ª—ã, –Ω–∞–∂–∞–≤ –Ω–∞ –∏–∫–æ–Ω–∫—É –∫–æ—Ä–∑–∏–Ω—ã

### API Endpoints

#### –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ PDF
```
GET /workorders/{id}/pdfs
```

#### –ó–∞–≥—Ä—É–∑–∏—Ç—å PDF
```
POST /workorders/pdf/{id}
Content-Type: multipart/form-data
Body: pdfs[] (–º–∞—Å—Å–∏–≤ —Ñ–∞–π–ª–æ–≤)
```

#### –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å PDF
```
GET /workorders/{workorderId}/pdf/{mediaId}/show
```

#### –°–∫–∞—á–∞—Ç—å PDF
```
GET /workorders/{workorderId}/pdf/{mediaId}/download
```

#### –£–¥–∞–ª–∏—Ç—å PDF
```
DELETE /workorders/pdf/delete/{id}
```

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –•—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
PDF —Ñ–∞–π–ª—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ `pdfs` –º–æ–¥–µ–ª–∏ Workorder —á–µ—Ä–µ–∑ Spatie Media Library.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
```php
[
    'id' => int,
    'name' => string,
    'file_name' => string,
    'size' => int (bytes),
    'mime_type' => string,
    'created_at' => string,
    'url' => string, // URL –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
    'download_url' => string, // URL –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
]
```

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Laravel 9+
- Spatie Media Library 10+
- PHP 8.0+
- –ë—Ä–∞—É–∑–µ—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ PDF viewer (Chrome, Firefox, Edge, Safari)

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ —á–µ—Ä–µ–∑ WorkorderPolicy
- –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–∏–ø–æ–≤ —Ñ–∞–π–ª–æ–≤ (—Ç–æ–ª—å–∫–æ PDF)
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞ (10MB)
- CSRF –∑–∞—â–∏—Ç–∞ –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

